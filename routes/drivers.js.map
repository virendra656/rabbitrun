{"version":3,"sources":["routes/drivers.ts"],"names":[],"mappings":";;AACA,gDAAsD;AACtD,mDAA+C;AAC/C,oCAAoC;AAEpC,cAAc,GAAG,EAAE,GAAG,EAAE,IAAI;IAC1B,IAAI,CAAC;QACH,IAAI,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAC/E,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;QAC7B,MAAM,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACX,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC;AACH,CAAC;AAED,gBAAuB,GAAY;IACjC,GAAG,CAAC,IAAI,CAAC,sBAAS,CAAC,WAAW,GAAG,iBAAiB,EAAE,yBAAgB,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;IAC1F,GAAG,CAAC,IAAI,CAAC,sBAAS,CAAC,WAAW,GAAG,cAAc,EAAE,yBAAgB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACpF,GAAG,CAAC,IAAI,CAAC,sBAAS,CAAC,WAAW,GAAG,6BAA6B,EAAE,CAAC,IAAI,CAAC,EAAE,yBAAgB,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC;IAC1H,GAAG,CAAC,IAAI,CAAC,sBAAS,CAAC,WAAW,GAAG,sBAAsB,EAAE,CAAC,IAAI,CAAC,EAAE,yBAAgB,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;AAC9G,CAAC;AALD,wBAKC","file":"drivers.js","sourcesContent":["import { Express } from 'express'\r\nimport { DriverController } from '../endpoints/_index'\r\nimport { CONSTANTS } from '../util/SiteConfig';\r\nimport * as jwt from 'jsonwebtoken';\r\n\r\nfunction Auth(req, res, next) {\r\n  try {\r\n    var decoded = jwt.verify(req.headers.authorization, process.env.EncryptionKEY);\r\n    req.body.user = decoded.data;\r\n    return next();\r\n  } catch (e) {\r\n    return next(e);\r\n  }\r\n}\r\n\r\nexport function routes(app: Express) {\r\n  app.post(CONSTANTS.apiBasePath + 'driver/register', DriverController.DriverPost.register);\r\n  app.post(CONSTANTS.apiBasePath + 'driver/login', DriverController.DriverPost.login);\r\n  app.post(CONSTANTS.apiBasePath + 'driver/updateDriverLocation', [Auth], DriverController.DriverPost.updateDriverLocation);\r\n  app.post(CONSTANTS.apiBasePath + 'driver/nearByDrivers', [Auth], DriverController.DriverPost.nearByDrivers);\r\n}\r\n"],"sourceRoot":"../../src"}