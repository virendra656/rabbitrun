{"version":3,"sources":["server.ts"],"names":[],"mappings":";;AAAA,mCAAkC;AAClC,mCAAkC;AAClC,qCAAoC;AACpC,iCAAgC;AAChC,6BAA4B;AAC5B,sDAAqD;AACrD,6CAA8C;AAE9C,0CAAyC;AACzC,iCAAiC;AACjC,0CAA+C;AAC/C,MAAM,IAAI,GAAW,EAAE,CAAA;AAMvB;IAIE;QACE,MAAM,CAAC,MAAM,EAAE,CAAC;QAChB,IAAI,CAAC,GAAG,GAAG,OAAO,EAAE,CAAA;QACpB,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACpD,IAAI,EAAE,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,CAAC;QAEtC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC;YAChB,oBAAoB,EAAE,GAAG;SAC1B,CAAC,CAAC,CAAA;QACH,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,wBAAU,CAAC;YACtB,QAAQ,EAAE,IAAI;SACf,CAAC,CAAC,CAAA;QACH,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI;YACxC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,CAAA;QAE5B,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,kBAAI,EAAE,CAAC,CAAA;QACpB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAA;QACpB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAA;QAChC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,CAAA;QAChC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE;YAClB,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,4CAA4C,EAAE,IAAI,CAAC,CAAA;QACzE,CAAC,CAAC,CAAA;QACF,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QAC3B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI;YACxC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,CAAA;YAC1B,uBAAc,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QACvC,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;IACtB,CAAC;IACH,UAAU,CAAE,EAAE;QAEZ,EAAE,CAAC,EAAE,CAAC,YAAY,EAAE,UAAS,MAAM;YACjC,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;YAEnC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAS,IAAI;gBAC3B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACtB,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,UAAS,IAAI;gBAC5B,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;gBAC3B,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,CAAC;YAC3C,CAAC,CAAC,CAAC;QAEP,CAAC,CAAC,CAAC;IAEH,CAAC;IACC,MAAM;QACJ,MAAM,CAAC,IAAI,CAAC,GAAG,CAAA;IACjB,CAAC;CACF;AAtDD,wBAsDC;AACD,IAAI,MAAM,EAAE,CAAA","file":"server.js","sourcesContent":["import * as express from 'express'\nimport * as winston from 'winston'\nimport * as boom from 'express-boom'\nimport * as morgan from 'morgan'\nimport * as cors from 'cors'\nimport * as expressValidator from 'express-validator'\nimport { json, urlencoded } from 'body-parser'\nimport { Express } from 'express'\nimport * as routes from './routes/_index'\nimport * as dotenv from 'dotenv';\nimport { renderResponse } from './util/helper';\nconst PORT: number = 80\n\n/**\n * Root class of your node server.\n * Can be used for basic configurations, for instance starting up the server or registering middleware.\n */\nexport class Server {\n\n  private app: Express\n\n  constructor() {\n    dotenv.config();\n    this.app = express()\n    let server = require('http').createServer(this.app);\n    let io = require('socket.io')(server);\n    // Express middleware\n    this.app.use(cors({\n      optionsSuccessStatus: 200\n    }))\n    this.app.use(urlencoded({\n      extended: true\n    }))\n    this.app.use(function (err, req, res, next) {\n      console.error(\"err.stack\")\n      //renderResponse(res, null, err, null);\n    })\n    this.app.use(json())\n    this.app.use(boom())\n    this.app.use(morgan('combined'))\n    this.app.use(expressValidator())\n    server.listen(PORT, () => {\n      winston.log('info', '--> Server successfully started at port %d', PORT)\n    })\n    routes.initRoutes(this.app)\n    this.app.use(function (err, req, res, next) {\n      console.error(\"err.stack\")\n      renderResponse(res, null, err, null);\n    })\n    this.initSocket(io);\n  }\ninitSocket (io) {\n\n  io.on('connection', function(client) {\n    console.log('Client connected...');\n\n    client.on('join', function(data) {\n        console.log(data);\n    });\n\n    client.on('messages', function(data) {\n           client.emit('broad', data);\n           client.broadcast.emit('broad',data);\n    });\n\n});\n\n}\n  getApp() {\n    return this.app\n  }\n}\nnew Server()\n"],"sourceRoot":"../src"}